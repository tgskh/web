{"ast":null,"code":"async function getToken() {\n  const body = new URLSearchParams({\n    'grant_type': 'client_credentials',\n    'client_id': clientId,\n    'client_secret': clientSecret\n  });\n  try {\n    const response = await fetch(urlToken, {\n      method: 'POST',\n      headers: headersToken,\n      body: body\n    });\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.log(\"Error:\", error);\n  }\n}\nasync function getUserID() {\n  const urlToFetch = 'https://api.spotify.com/v1/me';\n  const token = await getToken();\n  const headersSearch = {\n    'Authorization': `${token.token_type} ${token.access_token}`\n  };\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    console.log(data);\n    return data;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\nasync function getSongs(songTitle) {\n  const urlSearch = 'https://api.spotify.com/v1/search?q=';\n  const trackLimit = '15';\n  const options = '&type=track&limit=';\n  const token = await getToken();\n  const urlToFetch = `${urlSearch}${songTitle}${options}${trackLimit}`;\n  const headersSearch = {\n    'Authorization': `${token.token_type} ${token.access_token}`\n  };\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    return data.tracks.items;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\nasync function getPlaylist() {\n  const token = await getToken();\n  const urlToFetch = 'https://api.spotify.com/v1/users/smedjan/playlists';\n  const headersSearch = {\n    'Authorization': `${token.token_type} ${token.access_token}`\n  };\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    console.log(data);\n    return data;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\ngetUserID();\ngetPlaylist();\nexport default getSongs;","map":{"version":3,"names":["getToken","body","URLSearchParams","clientId","clientSecret","response","fetch","urlToken","method","headers","headersToken","data","json","error","console","log","getUserID","urlToFetch","token","headersSearch","token_type","access_token","getSongs","songTitle","urlSearch","trackLimit","options","tracks","items","getPlaylist"],"sources":["/Users/s.kharlanov/Documents/FnD/github/react/jammming/src/modules/fetch.js"],"sourcesContent":["async function getToken () {\n  const body = new URLSearchParams({\n    'grant_type': 'client_credentials',\n    'client_id': clientId,\n    'client_secret': clientSecret\n  });\n\n  try {\n    const response = await fetch(urlToken, {\n      method: 'POST',\n      headers: headersToken,\n      body: body\n    });\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.log(\"Error:\", error);\n  }\n}\n\nasync function getUserID () {\n  const urlToFetch = 'https://api.spotify.com/v1/me';\n  const token = await getToken();  \n  const headersSearch = {\n    'Authorization': `${token.token_type} ${token.access_token}`\n  }\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    console.log(data)\n    return data;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\n\n\nasync function getSongs (songTitle) {\n  const urlSearch = 'https://api.spotify.com/v1/search?q=';\n  const trackLimit = '15';\n  const options = '&type=track&limit=';\n  const token = await getToken();  \n  const urlToFetch = `${urlSearch}${songTitle}${options}${trackLimit}`;\n  const headersSearch = {\n    'Authorization': `${token.token_type} ${token.access_token}`\n  }\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    return data.tracks.items;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\n\nasync function getPlaylist () {\n  const token = await getToken(); \n  const urlToFetch = 'https://api.spotify.com/v1/users/smedjan/playlists';\n  const headersSearch = {\n    'Authorization': `${token.token_type} ${token.access_token}`\n  }\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    console.log(data)\n    return data;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\n\ngetUserID();\ngetPlaylist();\n\nexport default getSongs;"],"mappings":"AAAA,eAAeA,QAAQA,CAAA,EAAI;EACzB,MAAMC,IAAI,GAAG,IAAIC,eAAe,CAAC;IAC/B,YAAY,EAAE,oBAAoB;IAClC,WAAW,EAAEC,QAAQ;IACrB,eAAe,EAAEC;EACnB,CAAC,CAAC;EAEF,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACC,QAAQ,EAAE;MACrCC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAEC,YAAY;MACrBT,IAAI,EAAEA;IACR,CAAC,CAAC;IACF,MAAMU,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;IAClC,OAAOD,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,KAAK,CAAC;EAC9B;AACF;AAEA,eAAeG,SAASA,CAAA,EAAI;EAC1B,MAAMC,UAAU,GAAG,+BAA+B;EAClD,MAAMC,KAAK,GAAG,MAAMlB,QAAQ,CAAC,CAAC;EAC9B,MAAMmB,aAAa,GAAG;IACpB,eAAe,EAAE,GAAGD,KAAK,CAACE,UAAU,IAAIF,KAAK,CAACG,YAAY;EAC5D,CAAC;EACD,IAAI;IACF,MAAMhB,QAAQ,GAAG,MAAMC,KAAK,CAACW,UAAU,EAAE;MACvCT,MAAM,EAAE,KAAK;MACbC,OAAO,EAAEU;IACX,CAAC,CAAC;IACF,MAAMR,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;IAClCE,OAAO,CAACC,GAAG,CAACJ,IAAI,CAAC;IACjB,OAAOA,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAC9B,OAAO,EAAE;EACX;AACF;AAGA,eAAeS,QAAQA,CAAEC,SAAS,EAAE;EAClC,MAAMC,SAAS,GAAG,sCAAsC;EACxD,MAAMC,UAAU,GAAG,IAAI;EACvB,MAAMC,OAAO,GAAG,oBAAoB;EACpC,MAAMR,KAAK,GAAG,MAAMlB,QAAQ,CAAC,CAAC;EAC9B,MAAMiB,UAAU,GAAG,GAAGO,SAAS,GAAGD,SAAS,GAAGG,OAAO,GAAGD,UAAU,EAAE;EACpE,MAAMN,aAAa,GAAG;IACpB,eAAe,EAAE,GAAGD,KAAK,CAACE,UAAU,IAAIF,KAAK,CAACG,YAAY;EAC5D,CAAC;EACD,IAAI;IACF,MAAMhB,QAAQ,GAAG,MAAMC,KAAK,CAACW,UAAU,EAAE;MACvCT,MAAM,EAAE,KAAK;MACbC,OAAO,EAAEU;IACX,CAAC,CAAC;IACF,MAAMR,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;IAClC,OAAOD,IAAI,CAACgB,MAAM,CAACC,KAAK;EAC1B,CAAC,CAAC,OAAOf,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAC9B,OAAO,EAAE;EACX;AACF;AAEA,eAAegB,WAAWA,CAAA,EAAI;EAC5B,MAAMX,KAAK,GAAG,MAAMlB,QAAQ,CAAC,CAAC;EAC9B,MAAMiB,UAAU,GAAG,oDAAoD;EACvE,MAAME,aAAa,GAAG;IACpB,eAAe,EAAE,GAAGD,KAAK,CAACE,UAAU,IAAIF,KAAK,CAACG,YAAY;EAC5D,CAAC;EACD,IAAI;IACF,MAAMhB,QAAQ,GAAG,MAAMC,KAAK,CAACW,UAAU,EAAE;MACvCT,MAAM,EAAE,KAAK;MACbC,OAAO,EAAEU;IACX,CAAC,CAAC;IACF,MAAMR,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;IAClCE,OAAO,CAACC,GAAG,CAACJ,IAAI,CAAC;IACjB,OAAOA,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAC9B,OAAO,EAAE;EACX;AACF;AAEAG,SAAS,CAAC,CAAC;AACXa,WAAW,CAAC,CAAC;AAEb,eAAeP,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}