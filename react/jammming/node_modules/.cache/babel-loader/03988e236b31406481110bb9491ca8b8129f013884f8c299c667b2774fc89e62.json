{"ast":null,"code":"const tokenGlobal = await getToken();\nasync function getToken() {\n  const clientId = '9695df66110c4070ab27fdcb07f9d022';\n  const clientSecret = 'eb859c7faacb4037977fed00a8d04b19';\n  const urlToken = 'https://accounts.spotify.com/api/token';\n  const headersToken = {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  };\n  const body = new URLSearchParams({\n    'grant_type': 'client_credentials',\n    'client_id': clientId,\n    'client_secret': clientSecret\n  });\n  try {\n    const response = await fetch(urlToken, {\n      method: 'POST',\n      headers: headersToken,\n      body: body\n    });\n    const data = await response.json();\n    return data.access_token;\n  } catch (error) {\n    console.log(\"Error:\", error);\n  }\n}\nconst generateRandomString = length => {\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  const values = crypto.getRandomValues(new Uint8Array(length));\n  return values.reduce((acc, x) => acc + possible[x % possible.length], \"\");\n};\nconst sha256 = async plain => {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(plain);\n  return window.crypto.subtle.digest('SHA-256', data);\n};\nasync function getUserID() {\n  const urlToFetch = 'https://api.spotify.com/v1/me';\n  const headersSearch = {\n    'Authorization': `Bearer ${tokenGlobal}`\n  };\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    console.log(data);\n    return data;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\ngetUserID();\nasync function getSongs(songTitle) {\n  const urlSearch = 'https://api.spotify.com/v1/search?q=';\n  const trackLimit = '15';\n  const options = '&type=track&limit=';\n  const urlToFetch = `${urlSearch}${songTitle}${options}${trackLimit}`;\n  const headersSearch = {\n    'Authorization': `Bearer ${tokenGlobal}`\n  };\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    return data.tracks.items;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\nasync function getPlaylist() {\n  const urlToFetch = 'https://api.spotify.com/v1/users/smedjan/playlists';\n  const headersSearch = {\n    'Authorization': `Bearer ${tokenGlobal}`\n  };\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    console.log(data);\n    return data;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\nexport default getSongs;","map":{"version":3,"names":["tokenGlobal","getToken","clientId","clientSecret","urlToken","headersToken","body","URLSearchParams","response","fetch","method","headers","data","json","access_token","error","console","log","generateRandomString","length","possible","values","crypto","getRandomValues","Uint8Array","reduce","acc","x","sha256","plain","encoder","TextEncoder","encode","window","subtle","digest","getUserID","urlToFetch","headersSearch","getSongs","songTitle","urlSearch","trackLimit","options","tracks","items","getPlaylist"],"sources":["/Users/s.kharlanov/Documents/FnD/github/react/jammming/src/modules/fetch.js"],"sourcesContent":["const tokenGlobal = await getToken();\n\nasync function getToken () {\n  const clientId = '9695df66110c4070ab27fdcb07f9d022';\n  const clientSecret = 'eb859c7faacb4037977fed00a8d04b19';\n  const urlToken = 'https://accounts.spotify.com/api/token';\n  const headersToken = {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  }\n  \n  const body = new URLSearchParams({\n    'grant_type': 'client_credentials',\n    'client_id': clientId,\n    'client_secret': clientSecret\n  });\n\n  try {\n    const response = await fetch(urlToken, {\n      method: 'POST',\n      headers: headersToken,\n      body: body\n    });\n    const data = await response.json();\n    return data.access_token;\n  } catch (error) {\n    console.log(\"Error:\", error);\n  }\n}\n\nconst generateRandomString = (length) => {\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  const values = crypto.getRandomValues(new Uint8Array(length));\n  return values.reduce((acc, x) => acc + possible[x % possible.length], \"\");\n}\n\nconst sha256 = async (plain) => {\n  const encoder = new TextEncoder()\n  const data = encoder.encode(plain)\n  return window.crypto.subtle.digest('SHA-256', data)\n}\n\nasync function getUserID () {\n  const urlToFetch = 'https://api.spotify.com/v1/me'; \n  const headersSearch = {\n    'Authorization': `Bearer ${tokenGlobal}`\n  }\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    console.log(data)\n    return data;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\n\ngetUserID();\n\nasync function getSongs (songTitle) {\n  const urlSearch = 'https://api.spotify.com/v1/search?q=';\n  const trackLimit = '15';\n  const options = '&type=track&limit=';\n  const urlToFetch = `${urlSearch}${songTitle}${options}${trackLimit}`;\n  const headersSearch = {\n    'Authorization': `Bearer ${tokenGlobal}`\n  }\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    return data.tracks.items;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\n\nasync function getPlaylist () {\n  const urlToFetch = 'https://api.spotify.com/v1/users/smedjan/playlists';\n  const headersSearch = {\n    'Authorization': `Bearer ${tokenGlobal}`\n  }\n  try {\n    const response = await fetch(urlToFetch, {\n      method: 'GET',\n      headers: headersSearch\n    });\n    const data = await response.json();\n    console.log(data)\n    return data;\n  } catch (error) {\n    console.error('Error:', error);\n    return [];\n  }\n}\n\nexport default getSongs;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}